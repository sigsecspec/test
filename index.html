<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SSS Security Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        /* Desktop Theme: "Command Center" */
        --bg-primary: #0f0f0f;
        --bg-secondary: #1a1a1a;
        --border-primary: #535347;
        --border-primary-hover: #aeae5a;
        --border-secondary: #535347;
        --border-tertiary: #535347;
        --text-primary: #c4c4c4;
        --text-secondary: #787876;
        --accent-primary: #aeae5a;
        --accent-primary-text: #0f0f0f;
        --accent-secondary: #333333;
        --accent-secondary-hover: #444444;
        --status-active-bg: bg-blue-900/40;
        --status-active-text: text-blue-300;
        --shadow-color: rgba(174, 174, 90, 0.1);
      }

      @media (max-width: 767px) {
        :root {
          /* Mobile Theme: "Field Operative" */
          --bg-primary: #121212;
          --bg-secondary: #1E1E1E;
          --border-primary: #444444;
          --border-primary-hover: #FFBF00;
          --border-secondary: #333333;
          --border-tertiary: #2a2a2a;
          --text-primary: #E0E0E0;
          --text-secondary: #9E9E9E;
          --accent-primary: #FFBF00;
          --accent-primary-text: #121212;
          --accent-secondary: #333333;
          --accent-secondary-hover: #444444;
          --status-active-bg: bg-amber-500/20;
          --status-active-text: text-amber-400;
          --shadow-color: rgba(255, 191, 0, 0.1);
        }
      }

      body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
      }
      
      /* Custom scrollbar for a better look */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: var(--bg-primary);
      }
      ::-webkit-scrollbar-thumb {
        background-color: var(--border-primary);
        border-radius: 4px;
        border: 2px solid var(--bg-primary);
      }
       ::-webkit-scrollbar-thumb:hover {
        background-color: var(--text-secondary);
      }
      html {
        scroll-behavior: smooth;
      }

      .animate-in {
          animation: fadeInUp 0.6s ease forwards;
      }
      
      @keyframes fadeInUp {
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }
    </style>
    <!-- Babel for JSX transpilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- React and ReactDOM from CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0"
  }
}
</script>
</head>
<body class="bg-[var(--bg-primary)]">
    <div id="root"></div>

    <script type="text/babel" data-presets="react,typescript">
// Helper to use React hooks since we are not in a module
const { useState, useEffect, useRef } = React;

// --- START OF types.ts ---
const UserRole = {
  Owner: "Owner",
  CoOwner: "Co-Owner",
  DeputyChief: "Deputy Chief",
  Commander: "Commander",
  OperationsDirector: "Operations Director",
  OperationsManager: "Operations Manager",
  Supervisor: "Supervisor",
  TrainingOfficer: "Training Officer",
  LeadGuard: "Lead Guard",
  Guard: "Guard",
  Dispatch: "Dispatch",
  Secretary: "Secretary",
  Client: "Client",
};

// --- START OF database.ts ---
const initialData = {
  users: [
    { id: 'user-1', firstName: 'Admin', lastName: 'Owner', email: 'owner@sss.com', role: UserRole.Owner, rank: 'CHF (Chief)', level: 5, certifications: ['All'] },
    { id: 'user-2', firstName: 'Jane', lastName: 'Doe', email: 'coowner@sss.com', role: UserRole.CoOwner, rank: 'ASST CHF (Asst. Chief)', level: 5, certifications: ['All'] },
    { id: 'user-3', firstName: 'John', lastName: 'Smith', email: 'director@sss.com', role: UserRole.OperationsDirector, rank: 'CAP (Captain)', level: 5, certifications: ['Management', 'Tactical'] },
    { id: 'user-4', firstName: 'Emily', lastName: 'Jones', email: 'manager@sss.com', role: UserRole.OperationsManager, rank: 'LT (Lieutenant)', level: 5, certifications: ['Management'] },
    { id: 'user-5', firstName: 'Robert', lastName: 'Brown', email: 'secretary@sss.com', role: UserRole.Secretary, rank: 'N/A', level: 1, certifications: ['Admin'] },
    { id: 'user-6', firstName: 'Mike', lastName: 'Davis', email: 'supervisor@sss.com', role: UserRole.Supervisor, rank: 'SGT (Sergeant)', level: 4, certifications: ['Level 4', 'Supervision'], guardType: 'Base' },
    { id: 'user-7', firstName: 'Sarah', lastName: 'Wilson', email: 'training@sss.com', role: UserRole.TrainingOfficer, rank: 'CPL (Corporal)', level: 4, certifications: ['Level 4', 'Instructor'], guardType: 'Base' },
    { id: 'user-8', firstName: 'David', lastName: 'Clark', email: 'leadguard@sss.com', role: UserRole.LeadGuard, rank: 'CPL (Corporal)', level: 3, certifications: ['Level 3', 'Lead'], guardType: 'Base' },
    { id: 'user-9', firstName: 'Chris', lastName: 'Taylor', email: 'guard@sss.com', role: UserRole.Guard, rank: 'OFC (Officer)', level: 2, certifications: ['Level 2'], guardType: 'Flex' },
    { id: 'user-10', firstName: 'Jessica', lastName: 'Miller', email: 'dispatch@sss.com', role: UserRole.Dispatch, rank: 'N/A', level: 1, certifications: ['Dispatch'] },
    { id: 'user-11', firstName: 'Kevin', lastName: 'Harris', email: 'client@sss.com', role: UserRole.Client, rank: 'N/A', level: 0, certifications: [] },
  ],
  clients: [
      { id: 'client-1', companyName: 'Downtown Mall', contactEmail: 'security@downtownmall.com', userId: 'user-11' },
      { id: 'client-2', companyName: 'TechCorp HQ', contactEmail: 'ops@techcorp.com', userId: null },
  ],
  missions: [],
  sites: [
    { id: 'site-1', clientId: 'client-1', name: 'Main Entrance', address: '123 Commerce St, Downtown' },
    { id: 'site-2', clientId: 'client-1', name: 'West Wing', address: '123 Commerce St, Downtown' },
    { id: 'site-3', clientId: 'client-1', name: 'Loading Bay', address: '125 Commerce St, Downtown (Rear)' },
    { id: 'site-4', clientId: 'client-2', name: 'TechCorp Main Lobby', address: '456 Innovation Drive' },
  ],
  alerts: [
    { id: 'alert-1', severity: 'High', message: 'Guard D. Clark missed hourly check-in at Downtown Mall.', time: '2 mins ago' },
    { id: 'alert-2', severity: 'Medium', message: 'New last-minute mission posted by TechCorp HQ.', time: '5 mins ago' },
    { id: 'alert-3', severity: 'Low', message: 'Guard C. Taylor is approaching 40-hour weekly limit.', time: '25 mins ago' },
  ],
  applications: [
    { id: 'app-1', type: 'New Guard', name: 'Laura Evans', status: 'Pending Background Check' },
    { id: 'app-2', type: 'New Client', name: 'Global Logistics Inc.', status: 'Pending Contract Review' },
    { id: 'app-3', type: 'New Supervisor', name: 'James White', status: 'Pending Interview' },
  ],
  approvals: [],
};

const DB_KEY = 'sss_db';

const readDB = () => {
  const dbString = localStorage.getItem(DB_KEY);
  if (!dbString) {
    writeDB(initialData);
    return initialData;
  }
  const db = JSON.parse(dbString);
  db.missions = db.missions.map((m) => ({
      ...m,
      startTime: new Date(m.startTime),
      endTime: new Date(m.endTime),
  }));
  return db;
};

const writeDB = (db) => {
  localStorage.setItem(DB_KEY, JSON.stringify(db));
  window.dispatchEvent(new Event('storage'));
};

const initializeDB = () => { readDB(); };
const getUserByEmail = (email) => readDB().users.find(u => u.email.toLowerCase() === email.toLowerCase());
const getUserById = (id) => readDB().users.find(u => u.id === id);
const getUsers = (roles) => {
    const db = readDB();
    if (!roles) return db.users;
    return db.users.filter(u => roles.includes(u.role));
}
const getMissions = () => readDB().missions.sort((a, b) => a.startTime.getTime() - b.startTime.getTime());
const getClients = () => readDB().clients;
const getClientById = (id) => readDB().clients.find(c => c.id === id);
const getSites = () => readDB().sites || [];
const getAlerts = () => readDB().alerts || [];
const getApplications = () => readDB().applications || [];
const getApprovals = () => readDB().approvals || [];

const addMission = (missionData) => {
    const db = readDB();
    const newMission = {
        ...missionData,
        id: `mission-${Date.now()}`,
        status: 'Open',
        claimedBy: null,
    };
    db.missions.push(newMission);
    writeDB(db);
    return newMission;
};
const claimMission = (missionId, guardId) => {
    const db = readDB();
    const mission = db.missions.find(m => m.id === missionId);
    if (mission && mission.status === 'Open') {
        mission.status = 'Claimed';
        mission.claimedBy = guardId;
        writeDB(db);
        return mission;
    }
    return null;
}

// --- START OF content/homepageContent.ts ---
const featureList = [
    { title: "üõ°Ô∏è For Guards", items: ["Browse and claim available missions", "Real-time earnings tracking", "Comprehensive training programs", "Performance tracking and ratings", "Direct communication with operations"] },
    { title: "üëî For Clients", items: ["Post security missions instantly", "Manage multiple locations", "Request specific lead guards", "Track mission performance", "Flexible payment options"] },
    { title: "üëÆ For Supervisors", items: ["Conduct spot checks and oversight", "Approve training certifications", "Work regular missions", "Team management tools", "Performance monitoring"] },
    { title: "üìã Mission Management", items: ["Real-time mission tracking", "GPS check-in verification", "Automated scheduling", "Multi-guard coordination", "Instant notifications"] },
    { title: "üéì Training System", items: ["Multiple training types", "Interactive quizzes", "Certification tracking", "Field training coordination", "Progress monitoring"] },
    { title: "üí∞ Payment Processing", items: ["Automated pay calculation", "Real-time payment tracking", "Weekly payroll processing", "Overtime handling", "Transparent billing"] },
];
const statList = [ 
    { value: "500+", label: "Certified Guards" }, 
    { value: "1,200+", label: "Missions Completed" }, 
    { value: "98%", label: "Client Satisfaction" }, 
    { value: "24/7", label: "Support Available" } 
];
const levelList = [
    { title: "Level 1 - Basic", desc: "Essential security guard with standard equipment" }, 
    { title: "Level 2 - Enhanced", desc: "Basic equipment plus pepper spray" },
    { title: "Level 3 - Advanced", desc: "Pepper spray plus taser" }, 
    { title: "Level 4 - Professional", desc: "Pepper spray, taser, and baton" },
    { title: "Level 5 - Executive", desc: "Full equipment including firearm certification" }, 
    { title: "All Levels Include", desc: "Flashlight, cuffs, first aid (with certifications)" },
];
const testimonialList = [
    { quote: "Best security management platform I've used. The mission system makes scheduling so much easier!", author: "- Sarah M., Operations Manager" },
    { quote: "Found consistent work quickly. The training system helped me get certified for multiple mission types.", author: "- James T., Level 4 Guard" },
    { quote: "Finally, a reliable way to get quality security for our retail locations. Highly recommend!", author: "- Michael R., Client" },
];

// --- START OF components/Icons.tsx ---
const ShieldIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path fillRule="evenodd" d="M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z" clipRule="evenodd" />
    </svg>
);
const UserIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.095a1.23 1.23 0 00.41-1.412A9.99 9.99 0 0010 12c-2.31 0-4.438.784-6.131-2.095z" />
    </svg>
);
const LockIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clipRule="evenodd" />
    </svg>
);
const LogoutIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
    </svg>
);
const MenuIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>
);
const HomeIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M2.25 12l8.954-8.955a.75.75 0 011.06 0l8.955 8.955M3 10.5v9.75a1.5 1.5 0 001.5 1.5h15a1.5 1.5 0 001.5-1.5V10.5M9 21V12h6v9" />
    </svg>
);
const ClipboardListIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
);
const CalendarIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
);
const AcademicCapIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path d="M12 14l9-5-9-5-9 5 9 5z" />
        <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z" />
        <path strokeLinecap="round" strokeLinejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20" />
    </svg>
);
const PlusCircleIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
);
const LocationMarkerIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
        <path strokeLinecap="round" strokeLinejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
);
const CreditCardIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
    </svg>
);
const CogIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
        <path strokeLinecap="round" strokeLinejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
);
const UsersIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm6-11a4 4 0 10-5.292 0M21 21v-1a6 6 0 00-9-5.197" />
    </svg>
);
const ChartBarIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
    </svg>
);
const BriefcaseIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M20.25 14.15v4.075c0 1.313-.964 2.4-2.175 2.4H5.925c-1.21 0-2.175-1.087-2.175-2.4V14.15M16.5 6.375h-9a2.25 2.25 0 00-2.25 2.25v.151c0 .56.224 1.07.622 1.448l4.473 3.914c.48.42.96.634 1.448.634s.968-.214 1.448-.634l4.473-3.914c.398-.378.622-.888.622-1.448v-.151a2.25 2.25 0 00-2.25-2.25z" />
    </svg>
);
const CheckCircleIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
);
const EyeIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
        <path strokeLinecap="round" strokeLinejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
);
const MapIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M9 20l-5.447-2.724A1.99 1.99 0 013 15.382V5.618a1.99 1.99 0 011.553-1.894L9 2m0 18l6-3m-6 3V2m6 15l5.447 2.724A1.99 1.99 0 0021 18.618V8.882a1.99 1.99 0 00-1.553-1.894L15 4m-6 8l6-3" />
    </svg>
);
const BellIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.31 6.032l-1.42 1.42a.75.75 0 001.061 1.06l1.42-1.42A8.967 8.967 0 016 16.5v.75m6.357-3.418l.01.011.01.011M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
);
const DocumentTextIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
    </svg>
);
const MailIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
    </svg>
);
const XIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
);

// --- Declare all components with 'let' to allow reassignment in the bundle ---
let MissionBoard;
let PostMission;
let MyMissions;
let GuardManagement;
let ClientManagement;
let MyProfile;
let Training;
let MissionControl;
let ActiveMissions;
let Analytics;
let Approvals;
let SystemSettings;
let FieldOversight;
let TrainingApprovals;
let TrainingManagement;
let SiteRoster;
let LiveControl;
let Alerts;
let Applications;
let Communications;
let MySites;
let Billing;

let useOnScreen;
let AnimateOnScroll;
let Header;
let HomePage;
let LoginModal;
let LoginScreen;
let Sidebar;
let BottomNav;
let DashboardScreen;
let App;

// --- START OF CORE & NEW COMPONENTS ---

// components/HomePage.tsx
useOnScreen = (ref, options) => {
  const [isIntersecting, setIntersecting] = useState(false);
  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting) {
        setIntersecting(true);
        if (ref.current) {
          observer.unobserve(entry.target);
        }
      }
    }, options);
    if (ref.current) {
      observer.observe(ref.current);
    }
    return () => {
        if(ref.current) {
            observer.unobserve(ref.current);
        }
    };
  }, [ref, options]);
  return isIntersecting;
};

AnimateOnScroll = ({ children, className, style }) => {
  const ref = useRef();
  const onScreen = useOnScreen(ref, { threshold: 0.1 });
  return (
    <div ref={ref} className={`${className || ''} ${onScreen ? 'animate-in' : ''}`} style={{ opacity: 0, transform: 'translateY(20px)', ...style }}>
      {children}
    </div>
  );
};

Header = ({ onOpenLoginModal }) => {
    const [isMobileMenuOpen, setMobileMenuOpen] = useState(false);
    return(
        <header className="sticky top-0 z-30 bg-[var(--bg-primary)]/80 backdrop-blur-sm border-b border-[var(--border-secondary)]">
            <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex items-center justify-between h-16">
                    <div className="flex items-center">
                        <div className="font-bold text-lg text-[var(--text-primary)]">
                            <span>Signature</span> <span className="text-[var(--accent-primary)]">Security Specialist</span>
                        </div>
                    </div>
                    <nav className="hidden md:flex items-center space-x-1">
                        <a href="#home" className="px-3 py-2 rounded-md text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">Home</a>
                        <a href="#features" className="px-3 py-2 rounded-md text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">Features</a>
                        <a href="#how-it-works" className="px-3 py-2 rounded-md text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">How It Works</a>
                        <a href="#about" className="px-3 py-2 rounded-md text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">About</a>
                        <a href="#contact" className="px-3 py-2 rounded-md text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">Contact</a>
                        <button onClick={onOpenLoginModal} className="ml-4 px-4 py-2 rounded-md text-sm font-medium border border-[var(--border-primary)] text-[var(--text-primary)] hover:border-[var(--border-primary-hover)] hover:text-[var(--accent-primary)] transition-colors">Portal Login</button>
                    </nav>
                    <div className="md:hidden">
                        <button onClick={() => setMobileMenuOpen(!isMobileMenuOpen)} className="text-[var(--text-primary)]">
                            <MenuIcon className="h-6 w-6" />
                        </button>
                    </div>
                </div>
                {isMobileMenuOpen && (
                    <div className="md:hidden pt-2 pb-4 space-y-1">
                        <a href="#home" className="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">Home</a>
                        <a href="#features" className="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">Features</a>
                        <a href="#how-it-works" className="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">How It Works</a>
                        <a href="#about" className="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">About</a>
                        <a href="#contact" className="block px-3 py-2 rounded-md text-base font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)]">Contact</a>
                        <button onClick={onOpenLoginModal} className="mt-2 w-full text-left block px-3 py-2 rounded-md text-base font-medium border border-[var(--border-primary)] text-[var(--text-primary)]">Portal Login</button>
                    </div>
                )}
            </div>
        </header>
    )
};

HomePage = ({ onOpenLoginModal }) => {
    return (
        <div>
            <Header onOpenLoginModal={onOpenLoginModal} />
            <main>
                <section id="home" className="text-center py-20 md:py-32">
                    <div className="container mx-auto px-4">
                        <h1 className="text-4xl md:text-6xl font-extrabold text-[var(--text-primary)]">Professional Security Management Platform</h1>
                        <p className="mt-4 max-w-3xl mx-auto text-lg md:text-xl text-[var(--text-secondary)]">Connecting businesses with certified security professionals through our comprehensive digital platform. Streamline operations, manage missions, and ensure safety with our all-in-one solution.</p>
                        <div className="mt-8 flex flex-wrap justify-center gap-4">
                            <a href="#" className="px-8 py-3 rounded-md font-bold bg-[var(--accent-primary)] text-[var(--accent-primary-text)] transition-transform duration-200 hover:scale-105">Join as Guard</a>
                            <a href="#" className="px-8 py-3 rounded-md font-bold bg-[var(--accent-secondary)] text-[var(--text-primary)] transition-transform duration-200 hover:scale-105">Hire Security</a>
                        </div>
                    </div>
                </section>
                <section className="py-16 bg-[var(--bg-secondary)]">
                    <div className="container mx-auto px-4">
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
                           {statList.map((stat, i) => <AnimateOnScroll key={i} className="text-center"><h2 className="text-4xl font-bold text-[var(--accent-primary)]">{stat.value}</h2><p className="mt-1 text-[var(--text-secondary)]">{stat.label}</p></AnimateOnScroll>)}
                        </div>
                    </div>
                </section>
                <section id="features" className="py-20">
                     <div className="container mx-auto px-4">
                         <div className="text-center mb-12"><h2 className="text-3xl md:text-4xl font-bold">Platform Features</h2><p className="mt-2 text-[var(--text-secondary)]">Everything you need to manage security operations efficiently</p></div>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                             {featureList.map((feature, i) => (
                                 <AnimateOnScroll key={i} className="bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-lg p-6">
                                     <h3 className="text-xl font-bold mb-4">{feature.title}</h3>
                                     <ul className="space-y-2 text-[var(--text-secondary)] list-disc list-inside">
                                         {feature.items.map(item => <li key={item}>{item}</li>)}
                                     </ul>
                                 </AnimateOnScroll>
                            ))}
                        </div>
                    </div>
                </section>
                 <section id="how-it-works" className="py-20 bg-[var(--bg-secondary)]">
                    <div className="container mx-auto px-4">
                        <div className="text-center mb-12"><h2 className="text-3xl md:text-4xl font-bold">How It Works</h2></div>
                        <div className="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                           <AnimateOnScroll className="bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg p-6"><h3 className="text-xl font-bold mb-4">For Security Guards</h3><ol className="list-decimal list-inside space-y-2 text-[var(--text-secondary)]"><li><strong>Apply Online</strong> - Submit your application and certifications</li><li><strong>Complete Training</strong> - Take required training modules</li><li><strong>Get Approved</strong> - Officers review your certifications</li><li><strong>Browse Missions</strong> - See available missions</li><li><strong>Claim & Work</strong> - Accept missions and start earning</li><li><strong>Get Paid</strong> - Receive payment after completion</li></ol></AnimateOnScroll>
                           <AnimateOnScroll className="bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg p-6"><h3 className="text-xl font-bold mb-4">For Businesses</h3><ol className="list-decimal list-inside space-y-2 text-[var(--text-secondary)]"><li><strong>Apply Online</strong> - Submit your business information</li><li><strong>Get Verified</strong> - Complete verification process</li><li><strong>Set Up Contract</strong> - Create security contracts</li><li><strong>Post Missions</strong> - Create missions with requirements</li><li><strong>Guards Assigned</strong> - Certified guards accept missions</li><li><strong>Monitor Performance</strong> - Track missions and rate guards</li></ol></AnimateOnScroll>
                        </div>
                    </div>
                </section>
                <section className="py-20">
                     <div className="container mx-auto px-4">
                        <div className="text-center mb-12"><h2 className="text-3xl md:text-4xl font-bold">Guard Certification Levels</h2><p className="mt-2 text-[var(--text-secondary)]">Different security levels for different needs</p></div>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                             {levelList.map((level, i) => <AnimateOnScroll key={i} className="bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-lg p-6 text-center"><h4 className="text-