<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SSS Security Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        /* Desktop Theme: "Command Center" */
        --bg-primary: #0f0f0f;
        --bg-secondary: #1a1a1a;
        --border-primary: #535347;
        --border-primary-hover: #aeae5a;
        --border-secondary: #535347;
        --border-tertiary: #535347;
        --text-primary: #c4c4c4;
        --text-secondary: #787876;
        --accent-primary: #aeae5a;
        --accent-primary-text: #0f0f0f;
        --accent-secondary: #333333;
        --accent-secondary-hover: #444444;
        --status-active-bg: bg-blue-900/40;
        --status-active-text: text-blue-300;
        --shadow-color: rgba(174, 174, 90, 0.1);
      }

      @media (max-width: 767px) {
        :root {
          /* Mobile Theme: "Field Operative" */
          --bg-primary: #121212;
          --bg-secondary: #1E1E1E;
          --border-primary: #444444;
          --border-primary-hover: #FFBF00;
          --border-secondary: #333333;
          --border-tertiary: #2a2a2a;
          --text-primary: #E0E0E0;
          --text-secondary: #9E9E9E;
          --accent-primary: #FFBF00;
          --accent-primary-text: #121212;
          --accent-secondary: #333333;
          --accent-secondary-hover: #444444;
          --status-active-bg: bg-amber-500/20;
          --status-active-text: text-amber-400;
          --shadow-color: rgba(255, 191, 0, 0.1);
        }
      }

      body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
      }
      
      /* Custom scrollbar for a better look */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: var(--bg-primary);
      }
      ::-webkit-scrollbar-thumb {
        background-color: var(--border-primary);
        border-radius: 4px;
        border: 2px solid var(--bg-primary);
      }
       ::-webkit-scrollbar-thumb:hover {
        background-color: var(--text-secondary);
      }
      html {
        scroll-behavior: smooth;
      }

      .animate-in {
          animation: fadeInUp 0.6s ease forwards;
      }
      
      @keyframes fadeInUp {
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }
    </style>
    <!-- Babel for JSX transpilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- React and ReactDOM from CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0"
  }
}
</script>
</head>
<body class="bg-[var(--bg-primary)]">
    <div id="root"></div>

    <script type="text/babel" data-presets="react,typescript">
// Helper to use React hooks since we are not in a module
const { useState, useEffect, useRef } = React;

// --- START OF types.ts ---
const UserRole = {
  Owner: "Owner",
  CoOwner: "Co-Owner",
  DeputyChief: "Deputy Chief",
  Commander: "Commander",
  OperationsDirector: "Operations Director",
  OperationsManager: "Operations Manager",
  Supervisor: "Supervisor",
  TrainingOfficer: "Training Officer",
  LeadGuard: "Lead Guard",
  Guard: "Guard",
  Dispatch: "Dispatch",
  Secretary: "Secretary",
  Client: "Client",
};

// --- START OF database.ts ---
const initialData = {
  users: [
    { id: 'user-1', firstName: 'Admin', lastName: 'Owner', email: 'owner@sss.com', role: UserRole.Owner, rank: 'CHF (Chief)', level: 5, certifications: ['All'] },
    { id: 'user-2', firstName: 'Jane', lastName: 'Doe', email: 'coowner@sss.com', role: UserRole.CoOwner, rank: 'ASST CHF (Asst. Chief)', level: 5, certifications: ['All'] },
    { id: 'user-3', firstName: 'John', lastName: 'Smith', email: 'director@sss.com', role: UserRole.OperationsDirector, rank: 'CAP (Captain)', level: 5, certifications: ['Management', 'Tactical'] },
    { id: 'user-4', firstName: 'Emily', lastName: 'Jones', email: 'manager@sss.com', role: UserRole.OperationsManager, rank: 'LT (Lieutenant)', level: 5, certifications: ['Management'] },
    { id: 'user-5', firstName: 'Robert', lastName: 'Brown', email: 'secretary@sss.com', role: UserRole.Secretary, rank: 'N/A', level: 1, certifications: ['Admin'] },
    { id: 'user-6', firstName: 'Mike', lastName: 'Davis', email: 'supervisor@sss.com', role: UserRole.Supervisor, rank: 'SGT (Sergeant)', level: 4, certifications: ['Level 4', 'Supervision'], guardType: 'Base' },
    { id: 'user-7', firstName: 'Sarah', lastName: 'Wilson', email: 'training@sss.com', role: UserRole.TrainingOfficer, rank: 'CPL (Corporal)', level: 4, certifications: ['Level 4', 'Instructor'], guardType: 'Base' },
    { id: 'user-8', firstName: 'David', lastName: 'Clark', email: 'leadguard@sss.com', role: UserRole.LeadGuard, rank: 'CPL (Corporal)', level: 3, certifications: ['Level 3', 'Lead'], guardType: 'Base' },
    { id: 'user-9', firstName: 'Chris', lastName: 'Taylor', email: 'guard@sss.com', role: UserRole.Guard, rank: 'OFC (Officer)', level: 2, certifications: ['Level 2'], guardType: 'Flex' },
    { id: 'user-10', firstName: 'Jessica', lastName: 'Miller', email: 'dispatch@sss.com', role: UserRole.Dispatch, rank: 'N/A', level: 1, certifications: ['Dispatch'] },
    { id: 'user-11', firstName: 'Kevin', lastName: 'Harris', email: 'client@sss.com', role: UserRole.Client, rank: 'N/A', level: 0, certifications: [] },
  ],
  clients: [
      { id: 'client-1', companyName: 'Downtown Mall', contactEmail: 'security@downtownmall.com', userId: 'user-11' },
      { id: 'client-2', companyName: 'TechCorp HQ', contactEmail: 'ops@techcorp.com', userId: null },
  ],
  missions: [],
  sites: [
    { id: 'site-1', clientId: 'client-1', name: 'Main Entrance', address: '123 Commerce St, Downtown' },
    { id: 'site-2', clientId: 'client-1', name: 'West Wing', address: '123 Commerce St, Downtown' },
    { id: 'site-3', clientId: 'client-1', name: 'Loading Bay', address: '125 Commerce St, Downtown (Rear)' },
    { id: 'site-4', clientId: 'client-2', name: 'TechCorp Main Lobby', address: '456 Innovation Drive' },
  ],
  alerts: [
    { id: 'alert-1', severity: 'High', message: 'Guard D. Clark missed hourly check-in at Downtown Mall.', time: '2 mins ago' },
    { id: 'alert-2', severity: 'Medium', message: 'New last-minute mission posted by TechCorp HQ.', time: '5 mins ago' },
    { id: 'alert-3', severity: 'Low', message: 'Guard C. Taylor is approaching 40-hour weekly limit.', time: '25 mins ago' },
  ],
  applications: [
    { id: 'app-1', type: 'New Guard', name: 'Laura Evans', status: 'Pending Background Check' },
    { id: 'app-2', type: 'New Client', name: 'Global Logistics Inc.', status: 'Pending Contract Review' },
    { id: 'app-3', type: 'New Supervisor', name: 'James White', status: 'Pending Interview' },
  ],
  approvals: [],
};

const DB_KEY = 'sss_db';

const readDB = () => {
  const dbString = localStorage.getItem(DB_KEY);
  if (!dbString) {
    writeDB(initialData);
    return initialData;
  }
  const db = JSON.parse(dbString);
  db.missions = db.missions.map((m) => ({
      ...m,
      startTime: new Date(m.startTime),
      endTime: new Date(m.endTime),
  }));
  return db;
};

const writeDB = (db) => {
  localStorage.setItem(DB_KEY, JSON.stringify(db));
  window.dispatchEvent(new Event('storage'));
};

const initializeDB = () => { readDB(); };
const getUserByEmail = (email) => readDB().users.find(u => u.email.toLowerCase() === email.toLowerCase());
const getUserById = (id) => readDB().users.find(u => u.id === id);
const getUsers = (roles) => {
    const db = readDB();
    if (!roles) return db.users;
    return db.users.filter(u => roles.includes(u.role));
}
const getMissions = () => readDB().missions.sort((a, b) => a.startTime.getTime() - b.startTime.getTime());
const getClients = () => readDB().clients;
const getClientById = (id) => readDB().clients.find(c => c.id === id);
const getSites = () => readDB().sites || [];
const getAlerts = () => readDB().alerts || [];
const getApplications = () => readDB().applications || [];
const getApprovals = () => readDB().approvals || [];

const addMission = (missionData) => {
    const db = readDB();
    const newMission = {
        ...missionData,
        id: `mission-${Date.now()}`,
        status: 'Open',
        claimedBy: null,
    };
    db.missions.push(newMission);
    writeDB(db);
    return newMission;
};
const claimMission = (missionId, guardId) => {
    const db = readDB();
    const mission = db.missions.find(m => m.id === missionId);
    if (mission && mission.status === 'Open') {
        mission.status = 'Claimed';
        mission.claimedBy = guardId;
        writeDB(db);
        return mission;
    }
    return null;
}

// --- START OF content/homepageContent.ts ---
const featureList = [
    { title: "üõ°Ô∏è For Guards", items: ["Browse and claim available missions", "Real-time earnings tracking", "Comprehensive training programs", "Performance tracking and ratings", "Direct communication with operations"] },
    { title: "üëî For Clients", items: ["Post security missions instantly", "Manage multiple locations", "Request specific lead guards", "Track mission performance", "Flexible payment options"] },
    { title: "üëÆ For Supervisors", items: ["Conduct spot checks and oversight", "Approve training certifications", "Work regular missions", "Team management tools", "Performance monitoring"] },
    { title: "üìã Mission Management", items: ["Real-time mission tracking", "GPS check-in verification", "Automated scheduling", "Multi-guard coordination", "Instant notifications"] },
    { title: "üéì Training System", items: ["Multiple training types", "Interactive quizzes", "Certification tracking", "Field training coordination", "Progress monitoring"] },
    { title: "üí∞ Payment Processing", items: ["Automated pay calculation", "Real-time payment tracking", "Weekly payroll processing", "Overtime handling", "Transparent billing"] },
];
const statList = [ 
    { value: "500+", label: "Certified Guards" }, 
    { value: "1,200+", label: "Missions Completed" }, 
    { value: "98%", label: "Client Satisfaction" }, 
    { value: "24/7", label: "Support Available" } 
];
const levelList = [
    { title: "Level 1 - Basic", desc: "Essential security guard with standard equipment" }, 
    { title: "Level 2 - Enhanced", desc: "Basic equipment plus pepper spray" },
    { title: "Level 3 - Advanced", desc: "Pepper spray plus taser" }, 
    { title: "Level 4 - Professional", desc: "Pepper spray, taser, and baton" },
    { title: "Level 5 - Executive", desc: "Full equipment including firearm certification" }, 
    { title: "All Levels Include", desc: "Flashlight, cuffs, first aid (with certifications)" },
];
const testimonialList = [
    { quote: